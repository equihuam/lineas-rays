---
title: "L√≠neas de investigaci√≥n RAYS"
format: 
  revealjs:
    auto-stretch: false
    footer: "[i-Gamma](index.qmd)"

execute: 
  cache: false
  freeze: auto

title-slide-attributes:
    data-background-image: "img/Diapositiva1.PNG"
    data-background-size: "90%"
    data-background-opacity: "50%"

---


## L√≠neas de investigaci√≥n

\ 
\ 

```{python}
#| label: inicio
#| echo: false

# Reimportar bibliotecas necesarias despu√©s del reinicio del entorno
import pandas as pd
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_distances
from scipy.cluster.hierarchy import dendrogram, linkage
from scipy.spatial.distance import squareform
from scipy.cluster.hierarchy import leaves_list
from scipy.cluster.hierarchy import fcluster
import matplotlib.pyplot as plt
import seaborn as sns
import networkx as nx
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
from tabulate import tabulate
from IPython.display import Markdown, HTML, display
from itables import show
from adjustText import adjust_text

# Lista actualizada de temas proporcionados por el usuario
temas = {
  "id": ["tema_" + str(i + 1) for i in range(8)],
  "tema corto": [
    "Cambio global",
    "Conservaci√≥n comunitaria",
    "Evaluaci√≥n ambiental",
    "Estudios socioecol√≥gicos",
    "Gesti√≥n del agua",
    "Justicia socioambiental",
    "Ecolog√≠a de insectos",
    "Monitoreo ambiental"],
  "tema": [
      "Cambio global, sostenibilidad y din√°mica del paisaje",
      "Conservaci√≥n y manejo comunitario de la biodiversidad",
      "Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas",
      "Estudios sociocognitivos y herramientas socioecol√≥gicas para la sustentabilidad",
      "Gesti√≥n del agua y procesos hidrol√≥gicos",
      "Pol√≠ticas y justicia socioambiental",
      "Sistem√°tica y ecolog√≠a de insectos",
      "Tecnolog√≠a para el monitoreo ambiental"]}

temas_df = pd.DataFrame(temas)

# Formas de tabulaci√≥n de DataFrame
#Markdown(tabulate(temas_df, showindex=False, 
#          headers=temas_df.columns ))
#           
#show(temas_df[["tema corto", "tema"]])

temas_df[["tema corto", "tema"]].style.hide().set_properties(**{'font-size': '18pt'}).set_table_styles([{"selector":"thead",
                                "props": [("background-color", "dodgerblue"), ("color", "white"),
                                          ("border", "3px solid green"),
                                          ("font-size", "1.6rem") ]}]).relabel_index(["Tema Corto",
                                                                                       "Tema"], axis=1)

```




## Actores frecuentes y relevantes

```{python}
#| label: actores-frec-rel
#| echo: false

actores_FrecRel ={
  "actor": ["Comunidades rurales y locales",
            "Organizaciones comunitarias",
            "Instituciones acad√©micas y centros de investigaci√≥n",
            "Tomadores de decisiones / Gobiernos locales y nacionales",
            "ONGs ambientales y de desarrollo rural",
            "Productores agropecuarios",
            "Instituciones de educaci√≥n y formaci√≥n",
            "Juventudes y poblaci√≥n escolar",
            "Pueblos ind√≠genas",
            "Usuarios del agua (agr√≠colas, dom√©sticos, industriales)",
            "Entidades tecnol√≥gicas / desarrolladores"],
  "participacion": ["Agroecolog√≠a, conservaci√≥n comunitaria, gesti√≥n del agua, restauraci√≥n ecol√≥gica, justicia socioambiental",
                    "Conservaci√≥n de biodiversidad, manejo forestal, participaci√≥n en pol√≠ticas, gobernanza del agua",
                    "Todos los temas (desarrollo de metodolog√≠as, sistem√°tica de insectos, tecnolog√≠as de monitoreo, estudios socioecol√≥gicos)",
                    "Pol√≠ticas ambientales, ordenamiento territorial, justicia socioambiental, restauraci√≥n, manejo del paisaje",
                    "Apoyo en conservaci√≥n, gesti√≥n de recursos, fortalecimiento comunitario, monitoreo ambiental",
                    "Agroecolog√≠a, innovaci√≥n productiva, seguridad alimentaria, uso sustentable del suelo y del agua",
                    "Educaci√≥n socioambiental, herramientas participativas, cambio cognitivo hacia la sustentabilidad",
                    "Educaci√≥n ambiental, herramientas l√∫dicas, concientizaci√≥n sobre cambio clim√°tico y biodiversidad",
                    "Conservaci√≥n basada en saberes tradicionales, manejo del territorio, gobernanza del agua y biodiversidad",
                    "Gesti√≥n y justicia h√≠drica, seguridad del recurso, participaci√≥n en cuencas",
                    "Aplicaci√≥n de IA, sensores, percepci√≥n remota, monitoreo ambiental"]}
                    
actores_FrecRel_df = pd.DataFrame(actores_FrecRel)


actores_FrecRel_df[["actor", "participacion"]].style \
    .hide() \
    .set_properties(**{'font-size': '1.1rem'}) \
    .set_table_styles([{"selector":"thead",
                        "props": [("background-color", "dodgerblue"), ("color", "white"),
                                  ("border", "3px solid green"),
                                  ("font-size", "1.5rem") ]}]) \
    .relabel_index(["Actor", "Tema"], axis=1)
```




## Grupos clave (m√≠nimalista) {style="text-align: center;"}

\ 
\ 



```{python}
#| label: actores-clave
#| echo: false

# Definir los actores clave a vincular
actores_clave = {"actores": ["Gubernamentales", "Acad√©micos", "Comunidades rurales", 
                             "Ind√≠genas", "J√≥venes", "Mujeres"] }

actores_clave_df = pd.DataFrame(actores_clave)

actores_clave_df[["actores"]].style \
    .hide() \
    .set_properties(**{'font-size': '1.5rem'}) \
    .set_table_styles([{"selector":"thead",
                        "props": [("background-color", "dodgerblue"), ("color", "white"),
                                  ("border", "3px solid green"),
                                  ("font-size", "1.8rem") ]}]) \
    .relabel_index(["Grupo"], axis=1)

```



 

## Grupos Transversales Clave 
#### (Altamente Recurrentes)

\ 
\ 

+ Comunidades locales/rurales e ind√≠genas
+ Gobiernos y tomadores de decisiones
+ Instituciones acad√©micas y cient√≠ficas
+ Organizaciones sociales y ONGs
+ Productores rurales / campesinos


## Algunos detalles a considerar {.smaller}

\ 

+ Comunidades rurales e ind√≠genas: 
  + Aunque su influencia institucional es baja, su potencial es alto y su papel en la ejecuci√≥n de proyectos es fundamental ‚Üí clave empoderarlas.

+ Gobiernos y universidades: 
  + Actores con capacidad t√©cnica y decisional
  + Son indispensables para escalar procesos y para darles sostenibilidad.

+ ONGs: 
  + Pueden mediar entre comunidades y Estado, facilitar procesos participativos y fortalecer capacidades locales.


## Relaciones indirectas {.smaller}

Algunos actores externos (como turismo, sector inmobiliario) parecen estar al margen de nuestros intereses comunes y potencial de influencia. Entre las razones que llevan a esta apreciaci√≥n est√°n las siguientes: 

+ Tienen bajo inter√©s y baja influencia directa positiva.
+ Su participaci√≥n no suele ser proactiva en agendas de sostenibilidad.
+ Su impacto es m√°s indirecto (por ejemplo, presi√≥n sobre el suelo, recursos h√≠dricos o biodiversidad).
+ Sin embargo, esto no significa que deban ignorarse. 

En una versi√≥n m√°s estrat√©gica podr√≠amos considerar v√≠nculos de vigilancia o conflicto potencial, especialmente desde:

+ Comunidades locales ‚Üí Actores externos (por impacto territorial).
+ Gobiernos / ONGs ‚Üí Actores externos (regulaci√≥n o migraci√≥n de impactos).



## Resumen de Relevancia
### *(¬øpopularidad?)*

\ 
\ 

```{python}

relevancia = {
  "nivel": ["Muy alta",
            "Alta",
            "Media",
            "Moderada"],
  "temas": ["Cambio clim√°tico, restauraci√≥n y monitoreo con IA ‚Äî reciben la mayor√≠a de las publicaciones y financiaci√≥n",
"Conservaci√≥n comunitaria, gesti√≥n del agua y NbS ‚Äî con fuerte respaldo institucional y agendas globales",
"Pol√≠ticas socioambientales y estudios sociocognitivos ‚Äî en ascenso interdisciplinar, con creciente relevancia social",
"Sistem√°tica de insectos ‚Äî campo especializado, pero beneficiado por tendencias tecnol√≥gicas"]}

relevancia_df = pd.DataFrame(relevancia)

estilo = relevancia_df.style.set_table_styles([
                       {"selector":"thead",
                        "props": "background-color: dodgerblue; color: white; \
                                  border: 3px solid green; font-size: 1.8rem"},
                       {"selector": ".Muy", 
                        "props": "background-color: LightCoral; color: black; \
                                  font-size: 1.5rem; font-weight: bold"}, 
                       {"selector": ".Alta", 
                        "props": "background-color: LightSalmon; color: black; \
                                  font-size: 1.5rem; font-weight: bold"},
                       {"selector": ".Media", 
                        "props": "background-color: MediumAquaMarine; color: black; \
                                  font-size: 1.5rem; font-weight: bold"},
                       {"selector": ".Moderada", 
                        "props": "background-color: SkyBlue; color: black; \
                                 font-size: 1.5rem; font-weight: bold"}]) \
                     .hide() \
                     .set_properties(**{'font-size': '1.5rem'}) \
                     .relabel_index(["Relevancia", "L√≠neas"], axis=1)
            
estilo.set_td_classes(relevancia_df)            


```




## Distancia "sem√°ntica" entre temas {style="fig-align: center;"}

\ 

```{python}
#| label: dist-temas
#| echo: false
#| fig-align: center

# Vectorizar los temas con TF-IDF
vectorizer = TfidfVectorizer()
X_nuevos = vectorizer.fit_transform(temas_df["tema"])

# Calcular la matriz de distancias (coseno)
dist_matrix_nuevos = cosine_distances(X_nuevos)

# Crear un DataFrame para visualizaci√≥n
dist_df_nuevos = pd.DataFrame(dist_matrix_nuevos, 
                              index=temas_df["tema corto"], 
                              columns=temas_df["tema corto"])

# Graficar el mapa de calor con la matriz de distancias calculada
plt.figure(figsize=(9.2, 5.6))
sns.set(font_scale=0.9 )
# cmap="YlGnBu" o YlOrRd
sns.heatmap(dist_df_nuevos, annot=True, cmap="YlGnBu", 
            xticklabels=True, yticklabels=True)
#plt.title("Matriz de calor: Distancia sem√°ntica entre temas", fontsize=9)
plt.xticks(rotation=45, ha='right', fontsize=12)
plt.yticks(rotation=0, fontsize=12)
plt.ylabel(None)
plt.xlabel(None)
plt.tight_layout()
plt.show()


```



## Relevancia vs originalidad


```{python}
#| label: relevancia
#| echo: false

# Tema actualizado con estimaciones de relevancia y originalidad
data_updated = {
    "Tema": [
        "Cambio global, sostenibilidad y din√°mica del paisaje",
        "Conservaci√≥n y manejo comunitario de la biodiversidad",
        "Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas",
        "Estudios sociocognitivos y herramientas socioecol√≥gicas para la sustentabilidad",
        "Gesti√≥n del agua y procesos hidrol√≥gicos",
        "Pol√≠ticas y justicia socioambiental",
        "Sistem√°tica y ecolog√≠a de insectos",
        "Tecnolog√≠a para el monitoreo ambiental"
    ],
    "Relevancia": [9, 8, 8, 7, 8, 7, 7, 7],
    "Originalidad": [6, 7, 6, 8, 6, 8, 8, 7]
}

temas_df["relevancia"] = data_updated["Relevancia"]
temas_df["originalidad"] = data_updated["Originalidad"]
    
class_specific_css = ".small_font { font-size: 2rem; }"
display(HTML(f"<style>{class_specific_css}</style>" ""))

show(temas_df[["tema corto", "originalidad", "relevancia"]].sort_values(by=["originalidad"],ascending = False),
     classes="display nowrap small_font")

```




##

```{python}
#| label: rel-vs-orig
#| echo: false

# Asignar un color distinto a cada tema
colors = plt.cm.tab10.colors  # paleta de colores
temas_df["color"] = colors[:len(temas_df)]

# Agregar peque√±os desplazamientos aleatorios controlados para separar puntos cercanos
np.random.seed(42)
jitter_strength = 0.15

temas_df["Relevancia_jitter"] = temas_df["relevancia"] + \
                                np.random.uniform(-jitter_strength, 
                                                   jitter_strength, 
                                                   size=len(temas_df))
temas_df["Originalidad_jitter"] = temas_df["originalidad"] + \
                                  np.random.uniform(-jitter_strength, 
                                                     jitter_strength, 
                                                     size=len(temas_df))

# Crear el gr√°fico de dispersi√≥n con los puntos ajustados
plt.figure(figsize=(10, 6))
for i, row in temas_df.iterrows():
    plt.scatter(row["Relevancia_jitter"], row["Originalidad_jitter"], color=row["color"], s=100)

# A√±adir la leyenda con los mismos colores
for i, row in temas_df.iterrows():
    plt.plot([], [], 'o', color=row["color"], label=row["tema"])

plt.title("Relevancia vs. Originalidad de Temas", fontsize=24)
plt.xlabel("Relevancia (1-10)", fontsize=12)
plt.ylabel("Originalidad (1-10)", fontsize=12)
plt.xticks(fontsize=10)
plt.yticks(fontsize=10)
plt.xlim(5.5, 9.5)
plt.ylim(5.5, 9.5)
plt.grid(True)
plt.legend(loc='best', bbox_to_anchor=(0.97, 0.95), fontsize=8, shadow=True)
plt.tight_layout()

plt.show()
```


## Matriz de actores-inter√©s 

\ 

::: {style="font-size: 0.5em;"}

| **Categor√≠a**                                               | **Actores**                                                                                                               | **Inter√©s** | **Influencia** | **Estrategia recomendada**                                                       |
| ----------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- | ----------- | -------------- | -------------------------------------------------------------------------------- |
| **Alta Influencia / Alto Inter√©s (Gesti√≥n cercana)**        | - Gobiernos locales y nacionales<br>- Instituciones acad√©micas<br>- ONGs ambientales relevantes                           | Alto        | Alto           | Involucrarlos activamente en dise√±o, implementaci√≥n y evaluaci√≥n de iniciativas. |
| **Alta Influencia / Bajo Inter√©s (Monitoreo estrat√©gico)**  | - Instituciones tecnol√≥gicas<br>- Agencias gubernamentales no ambientales<br>- Empresas del sector h√≠drico o agropecuario | Bajo        | Alto           | Informar, sensibilizar y alinear intereses con metas socioambientales.           |
| **Baja Influencia / Alto Inter√©s (Apoyo y empoderamiento)** | - Comunidades rurales e ind√≠genas<br>- Productores agroecol√≥gicos<br>- Grupos juveniles y escolares                       | Alto        | Bajo           | Empoderar mediante capacitaci√≥n, recursos, gobernanza participativa.             |
| **Baja Influencia / Bajo Inter√©s (Seguimiento m√≠nimo)**     | - Poblaci√≥n urbana no organizada<br>- Actores externos no involucrados (p. ej. turistas, sector inmobiliario informal)    | Bajo        | Bajo           | Informar ocasionalmente y vigilar posibles impactos indirectos.                  |

:::



## 

```{python}
#| label: graf-act-interes 
#| echo: false  

# Definir los actores con sus niveles de inter√©s e influencia
actores = {
    "Gobiernos\ny universidades": (8, 9),
    "ONGs ambientales": (7, 8),
    "Comunidades rurales\ne ind√≠genas": (9, 4),
    "Productores agroecol√≥gicos": (8, 3),
    "Grupos juveniles\ny escolares": (7, 2),
    "Instituciones tecnol√≥gicas": (4, 8),
    "Agencias no ambientales": (3, 7),
    "Empresas del sector\nh√≠drico/agropecuario": (5, 7),
    "Poblaci√≥n urbana\nno organizada": (2, 2),
    "Actores externos\n(turismo, inmobiliario)": (3, 3),
}

# Crear el gr√°fico
fig, ax = plt.subplots(figsize=(10, 7))

# L√≠mites y l√≠neas divisorias
ax.set_xlim(0, 10)
ax.set_ylim(0, 10)
ax.axhline(5, color='gray', linestyle='--')
ax.axvline(5, color='gray', linestyle='--')

# Etiquetas y t√≠tulo
ax.set_title("Matriz de Inter√©s - Influencia de Actores Clave", fontsize=24)
ax.set_xlabel("Inter√©s", fontsize=12)
ax.set_ylabel("Influencia", fontsize=12)

# Colocar los actores en el gr√°fico   
texts = []
for actor, (interes, influencia) in actores.items():
    ax.scatter(interes, influencia, s=100, alpha=0.7)
    texts.append(ax.text(interes + 0.2, influencia, actor, fontsize=11))

adjust_text(texts)

# Cuadrantes
ax.text(7, 9.5, "Gesti√≥n cercana", fontsize=11, color='green')
ax.text(1, 9.5, "Apoyo / Empoderamiento", fontsize=11, color='blue')
ax.text(7, 0.5, "Monitoreo estrat√©gico", fontsize=11, color='orange')
ax.text(1, 0.5, "Seguimiento m√≠nimo", fontsize=11, color='gray')

plt.grid(True, linestyle=':', linewidth=0.5)
plt.tight_layout()
plt.show()


```



## Dendrograma de las l√≠neas {style="text-align: center;"}


```{python}
#| label: dendro
#| echo: false
#| fig-align: center


# Vectorizaci√≥n TF-IDF
vectorizer = TfidfVectorizer()
X = vectorizer.fit_transform(temas_df["tema"])

# Calcular matriz de distancias coseno
dist_matrix = cosine_distances(X)
condensed_dist = squareform(dist_matrix)

# Generar clusters jer√°rquicos
linked = linkage(condensed_dist, method='ward')

# Graficar dendrograma con etiquetas cortas
plt.figure(figsize=(15, 8))
dendrogram(
    linked,
    labels=temas_df["tema corto"].to_list(),
    orientation='top',
    distance_sort='ascending',
    leaf_rotation=45
)
plt.tight_layout()
plt.axhline(1.07, linestyle='--')
plt.xticks(fontsize=20)
plt.yticks(fontsize=20)
plt.show()

```


```{python}
#| label: leyenda
#| echo: false
#| eval: false

class_specific_css = """
                       .small_font { font-size: 0.6rem; } 
                       .dataTable th {font-size: 0.9rem;}
                     """
display(HTML(f"<style>{class_specific_css}</style>" ""))

show(temas_df[["tema corto", "tema"]],
     classes="display nowrap small_font")



```


\ 
\ 
 


## Mapa conceptual {style="fig-align: center;"}
####  Temas agrupados por cercan√≠a sem√°ntica (Clusters)

```{python}
#| label: clusters
#| echo: false
#| fig-align: center

# Obtener el orden de los temas desde el dendrograma
ordered_indices = leaves_list(linked)
temas_ordenados = [temas_df.tema[i] for i in ordered_indices]

# Concatenar los temas por cercan√≠a tem√°tica
temas_concatenados = " ‚Üí ".join(temas_ordenados)

temas_concatenados

# Definir n√∫mero de clusters (p. ej., 3 para visualizar grandes bloques tem√°ticos)
num_clusters = 3
clusters = fcluster(linked, num_clusters, criterion='maxclust')

# Crear DataFrame con temas y su cluster
df_clusters = pd.DataFrame({
    "Tema": temas_df["tema"],
    "Corto": temas_df["tema corto"], 
    "Cluster": clusters
}).sort_values("Cluster")

# Crear grafo para el mapa conceptual
G_conceptual = nx.Graph()

# Colores para clusters
cluster_colors = {
    1: 'lightblue',
    2: 'lightgreen',
    3: 'lightcoral'
}

# Agregar nodos con color seg√∫n cluster
for _, row in df_clusters.iterrows():
    G_conceptual.add_node(row["Tema"], cluster=row["Cluster"])

# Conectar nodos consecutivos por ordenamiento jer√°rquico
for i in range(len(temas_ordenados) - 1):
    G_conceptual.add_edge(temas_ordenados[i], temas_ordenados[i+1])

# Posici√≥n con spring layout
pos = nx.spring_layout(G_conceptual, seed=42, k=0.3)

# Dibujar grafo con colores por cluster
plt.figure(figsize=(17, 7.5))

for cluster in df_clusters["Cluster"].unique():
    cluster_nodes = df_clusters[df_clusters["Cluster"] == cluster]["Tema"].tolist()
    nx.draw_networkx_nodes(G_conceptual, pos, nodelist=cluster_nodes, node_color=cluster_colors[cluster], node_size=500, label=f"Cluster {cluster}")

nx.draw_networkx_edges(G_conceptual, pos)
nx.draw_networkx_labels(G_conceptual, pos, font_size=12)

plt.axis('off')
plt.legend()
plt.tight_layout()
plt.show()


```




## DAG: Relaciones entre actores {style="fig-lign: center;"}
 
```{python}
#| label: DAG
#| echo: false 
#| fig-align: center

# Crear grafo dirigido
G = nx.DiGraph()

# Niveles de actores
nivel_1 = ["Gobiernos", "Universidades"]
nivel_2 = ["ONGs ambientales", "Instituciones tecnol√≥gicas", "Agencias no ambientales"]
nivel_3 = ["Comunidades rurales", "Pueblos ind√≠genas", "Productores agroecol√≥gicos", "Grupos juveniles"]
nivel_4 = ["Poblaci√≥n urbana", "Actores externos"]

# Agregar nodos con atributos de nivel
for n in nivel_1:
    G.add_node(n, level=1)
for n in nivel_2:
    G.add_node(n, level=2)
for n in nivel_3:
    G.add_node(n, level=3)
for n in nivel_4:
    G.add_node(n, level=4)

# Relaciones entre actores
edges = [
    ("Gobiernos", "ONGs ambientales"),
    ("Gobiernos", "Agencias no ambientales"),
    ("Gobiernos", "Instituciones tecnol√≥gicas"),
    ("Gobiernos", "Comunidades rurales"),
    ("Gobiernos", "Pueblos ind√≠genas"),

    ("Universidades", "ONGs ambientales"),
    ("Universidades", "Instituciones tecnol√≥gicas"),
    ("Universidades", "Productores agroecol√≥gicos"),
    ("Universidades", "Grupos juveniles"),

    ("ONGs ambientales", "Comunidades rurales"),
    ("ONGs ambientales", "Pueblos ind√≠genas"),
    ("ONGs ambientales", "Productores agroecol√≥gicos"),

    ("Instituciones tecnol√≥gicas", "Universidades"),
    ("Instituciones tecnol√≥gicas", "Productores agroecol√≥gicos"),

    ("Comunidades rurales", "Pueblos ind√≠genas"),
    ("Grupos juveniles", "Poblaci√≥n urbana"),
]

G.add_edges_from(edges)

# Posiciones de nodos seg√∫n nivel
pos = nx.multipartite_layout(G, subset_key="level")

# Colores por nivel
color_map = []
for node in G.nodes(data=True):
    level = node[1]['level']
    if level == 1:
        color_map.append("#4CAF50")  # verde - alta influencia
    elif level == 2:
        color_map.append("#FFC107")  # amarillo - intermediarios
    elif level == 3:
        color_map.append("#2196F3")  # azul - actores locales
    else:
        color_map.append("#9E9E9E")  # gris - perif√©ricos


# Agregar relaciones indirectas o de conflicto potencial con actores externos
edges_conflicto = [
    ("Comunidades rurales", "Actores externos"),
    ("Pueblos ind√≠genas", "Actores externos"),
    ("Gobiernos", "Actores externos"),
    ("ONGs ambientales", "Actores externos"),
]

# Agregamos las nuevas relaciones al grafo
G.add_edges_from(edges_conflicto)

# Redibujar el DAG con las nuevas conexiones
plt.figure(figsize=(12, 7))

# Dibujar nodos
nx.draw_networkx_nodes(G, pos, node_color=color_map, node_size=2000)

# Dibujar etiquetas
nx.draw_networkx_labels(G, pos, font_size=10, font_weight='bold')

# Separar los tipos de bordes
edges_principales = [e for e in G.edges() if e not in edges_conflicto]
edges_conflicto_color = "gray"
edges_principales_color = "black"

# Dibujar bordes principales
nx.draw_networkx_edges(G, pos, edgelist=edges_principales, edge_color=edges_principales_color, arrows=True)

# Dibujar bordes de conflicto/potencial vigilancia (en gris punteado)
nx.draw_networkx_edges(
    G, pos, edgelist=edges_conflicto,
    edge_color=edges_conflicto_color,
    style='dashed', arrows=True
)


plt.axis('off')
plt.tight_layout()
plt.show()


```




 
 
## Tres grupos s√≠ntesis... {.smaller}
 

#### üü¢ **Cluster 1: Restauraci√≥n, conservaci√≥n y justicia territorial**

:::{style="font-size:0.7em"} 

**Temas incluidos:**

* Conservaci√≥n y manejo comunitario de la biodiversidad
* Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas
* Pol√≠ticas y justicia socioambiental

**Descripci√≥n:**
Este grupo representa una agenda profundamente anclada en el territorio y la relaci√≥n sociedad-naturaleza. Aqu√≠ convergen acciones pr√°cticas de conservaci√≥n ecol√≥gica con marcos de justicia y gobernanza ambiental. Tienen un enfoque integral que combina conocimientos t√©cnicos, sistemas normativos, pr√°cticas tradicionales y participaci√≥n social.

**Actores clave:**

* Comunidades rurales e ind√≠genas
* Gobiernos y tomadores de decisiones
* ONGs y organizaciones sociales
* Instituciones acad√©micas y cient√≠ficas

**Relevancia en M√©xico:** Muy alta

**Originalidad:** Alta, por su enfoque interdisciplinario e intercultural.

:::

## ...Tres grupos s√≠ntesis... {.smaller}


#### üîµ **Cluster 2: Enfoques tecnosociales para la sustentabilidad**

:::{style="font-size:0.7em"} 

**Temas incluidos:**

* Estudios sociocognitivos y herramientas socioecol√≥gicas para la sustentabilidad
* Tecnolog√≠a para el monitoreo ambiental

**Descripci√≥n:**
Este cluster se caracteriza por el **uso de herramientas innovadoras** ‚Äìsociales y tecnol√≥gicas‚Äì aplicadas a la sustentabilidad. Los estudios sociocognitivos promueven la integraci√≥n de saberes y la participaci√≥n comunitaria, mientras que el monitoreo ambiental introduce tecnolog√≠as emergentes (IA, sensores, drones) para seguimiento ecol√≥gico. Es el m√°s metodol√≥gicamente diverso y abierto a la innovaci√≥n.

**Actores clave:**

* Instituciones acad√©micas
* Gobiernos t√©cnicos
* J√≥venes y colectivos sociales
* ONGs con enfoque en participaci√≥n y tecnolog√≠a

**Relevancia en M√©xico:** Alta

**Originalidad:** Muy alta, especialmente por sus m√©todos y su apertura a la innovaci√≥n social y tecnol√≥gica.

:::



## ...Tres grupos s√≠ntesis  {.smaller}


#### üî¥ **Cluster 3: Cambio global y sistemas ecol√≥gicos complejos**

:::{style="font-size:0.7em"} 

**Temas incluidos:**

* Cambio global, sostenibilidad y din√°mica del paisaje
* Gesti√≥n del agua y procesos hidrol√≥gicos
* Sistem√°tica y ecolog√≠a de insectos

**Descripci√≥n:**
Este grupo aborda temas m√°s **sist√©micos, biof√≠sicos y globales**. Involucra la modelaci√≥n de procesos complejos como el cambio clim√°tico, la gesti√≥n de recursos h√≠dricos y la biodiversidad estructural. Aunque algunos enfoques est√°n consolidados, su integraci√≥n es fundamental para dise√±ar pol√≠ticas basadas en evidencia ecol√≥gica.

**Actores clave:**

* Gobiernos y agencias t√©cnicas
* Centros de investigaci√≥n
* Productores rurales (por implicaci√≥n indirecta)
* Comunidades afectadas por sequ√≠a o cambio clim√°tico

**Relevancia en M√©xico:** Muy alta

**Originalidad:** Media (alta en integraci√≥n, moderada en enfoques disciplinares cl√°sicos)

:::


## 

:::{layout="[1,1]"}

![](img/An_infographic_titled__Clusters_de_Temas_Socioambi.png){width=440}

![](img/ChatGPT Image 18 jun 2025, 10_14_11 p.m..png){width=440}
:::


# Material complementario

## Temas y actores clave {style="text-align: center;"}


```{python}
#| label: vincula-actores
#| echo: false
#| fig-align: center

# Establecer relaciones estimadas entre temas y actores
tema_actor_clave_data = {
    "Cambio global": ["Gubernamentales", 
                      "Acad√©micos", 
                      "J√≥venes"],
    "Conservaci√≥n comunitaria": ["Ind√≠genas", 
                                 "Comunidades rurales", 
                                 "Acad√©micos", 
                                 "Mujeres"],
    "Evaluaci√≥n ambiental": ["Gubernamentales", 
                             "Comunidades rurales", 
                             "Acad√©micos"],
    "Estudios ocioecol√≥gicos": ["J√≥venes", 
                                "Mujeres", 
                                "Acad√©micos", 
                                "Ind√≠genas"],
    "Gesti√≥n del agua": ["Gubernamentales", 
                         "Comunidades rurales", 
                         "Ind√≠genas", 
                         "Acad√©micos"],
    "Justicia socioambiental": ["Gubernamentales", 
                                "Ind√≠genas", 
                                "Mujeres", 
                                "Acad√©micos", 
                                "J√≥venes"],
    "Ecolog√≠a de insectos": ["Acad√©micos", 
                             "Gubernamentales"],
    "Monitoreo ambiental": ["Gubernamentales", 
                            "Acad√©micos", 
                            "J√≥venes"]
}

# Crear DataFrame de v√≠nculos
vinculos = []
for tema, actores in tema_actor_clave_data.items():
    for actor in actores:
        vinculos.append((tema, actor))

df_vinculos = pd.DataFrame(vinculos, columns=["Tema", "Actor Asociado"])

# Crear un nuevo grafo
G_vinculos = nx.Graph()

# Agregar nodos y bordes desde el DataFrame
for _, row in df_vinculos.iterrows():
    tema = row["Tema"]
    actor = row["Actor Asociado"]
    G_vinculos.add_node(tema, type='tema')
    G_vinculos.add_node(actor, type='actor')
    G_vinculos.add_edge(tema, actor)

# Posiciones para graficar
pos = nx.spring_layout(G_vinculos, seed=42, k=0.2)

# Separar nodos por tipo
tema_nodes = [n for n in G_vinculos.nodes if G_vinculos.nodes[n]['type'] == 'tema']
actor_nodes = [n for n in G_vinculos.nodes if G_vinculos.nodes[n]['type'] == 'actor']

# Graficar
plt.figure(figsize=(12, 7.5))
nx.draw_networkx_nodes(G_vinculos, pos, nodelist=tema_nodes, node_shape='s', node_color='lightgreen', node_size=500, label="Temas")
nx.draw_networkx_nodes(G_vinculos, pos, nodelist=actor_nodes, node_color='lightcoral', node_size=500, label="Actores")
nx.draw_networkx_edges(G_vinculos, pos)
nx.draw_networkx_labels(G_vinculos, pos, font_size=14)

plt.axis('off')
plt.tight_layout()
plt.show()

```



## Temas y Actores Transversales {style="text-align: center;"}

```{python}
#| label: act-transversal
#| echo: false
#| fig-align: center

# Nuevos actores clave propuestos
nuevos_actores = [
    "Comunidades locales/rurales e ind√≠genas",
    "Gobiernos y tomadores de decisiones",
    "Instituciones acad√©micas y cient√≠ficas",
    "Organizaciones sociales y ONGs",
    "Productores rurales / campesinos"
]
 

# Relaciones estimadas entre los temas y estos nuevos actores
tema_nuevos_actores = {
    "Cambio global ": ["Gobiernos y tomadores de decisiones", 
                       "Instituciones acad√©micas y cient√≠ficas"],
    "Conservaci√≥n comunitaria": ["Comunidades locales/rurales e ind√≠genas", 
                                 "Organizaciones sociales y ONGs", 
                                 "Instituciones acad√©micas y cient√≠ficas"],
    "Evaluaci√≥n ambiental": ["Gobiernos y tomadores de decisiones", 
                             "Comunidades locales/rurales e ind√≠genas", 
                             "Instituciones acad√©micas y cient√≠ficas"],
    "Estudios socioecol√≥gicos ": ["Organizaciones sociales y ONGs", 
                                  "Instituciones acad√©micas y cient√≠ficas", 
                                  "Comunidades locales/rurales e ind√≠genas"],
    "Gesti√≥n del agua ": ["Gobiernos y tomadores de decisiones", 
                          "Comunidades locales/rurales e ind√≠genas", 
                          "Instituciones acad√©micas y cient√≠ficas"],
    "Justicia socioambiental": ["Organizaciones sociales y ONGs", 
                                "Gobiernos y tomadores de decisiones", 
                                "Comunidades locales/rurales e ind√≠genas"],
    "Ecolog√≠a de insectos": ["Instituciones acad√©micas y cient√≠ficas", 
                             "Productores rurales / campesinos"],
    "Monitoreo ambiental": ["Gobiernos y tomadores de decisiones", 
                            "Instituciones acad√©micas y cient√≠ficas"]}


# Crear DataFrame de v√≠nculos
nuevos_vinculos = []
for tema, actores in tema_nuevos_actores.items():
    for actor in actores:
        nuevos_vinculos.append((tema, actor))

df_nuevos_vinculos = pd.DataFrame(nuevos_vinculos, columns=["Tema", "Actor Asociado"])

# Crear grafo
G_nuevos = nx.Graph()

# Agregar nodos y relaciones
for _, row in df_nuevos_vinculos.iterrows():
    G_nuevos.add_node(row["Tema"], type='tema')
    G_nuevos.add_node(row["Actor Asociado"], type='actor')
    G_nuevos.add_edge(row["Tema"], row["Actor Asociado"])

# Posicionamiento
pos = nx.spring_layout(G_nuevos, seed=42, k=0.2)

# Separar nodos
tema_nodes = [n for n in G_nuevos.nodes if G_nuevos.nodes[n]['type'] == 'tema']
actor_nodes = [n for n in G_nuevos.nodes if G_nuevos.nodes[n]['type'] == 'actor']

# Graficar
plt.figure(figsize=(15.2, 8.5))
nx.draw_networkx_nodes(G_nuevos, pos, nodelist=tema_nodes, node_shape='s', node_color='lightgreen', node_size=700, label="Temas")
nx.draw_networkx_nodes(G_nuevos, pos, nodelist=actor_nodes, node_color='lightcoral', node_size=600, label="Actores")
nx.draw_networkx_edges(G_nuevos, pos)
nx.draw_networkx_labels(G_nuevos, pos, font_size=10)

plt.axis('off')
plt.show()

```

\ 
\ 

## DAG: Relaci√≥n entre Temas y Actores

```{python}
#| label: DAG-to-act
#| echo: false

# Crear la matriz con columnas de Tema, Actor, Nivel de Inter√©s e Influencia
data = [
    # Agroecolog√≠a
    ("Agroecolog√≠a y sistemas alimentarios sustentables", "Gubernamentales (SADER, locales)", "Medio", "Alto"),
    ("Agroecolog√≠a y sistemas alimentarios sustentables", "Comunidades rurales, ejidos", "Alto", "Alto"),
    ("Agroecolog√≠a y sistemas alimentarios sustentables", "Academia (INIFAP, IPN)", "Alto", "Medio"),
    ("Agroecolog√≠a y sistemas alimentarios sustentables", "Agroindustria, certificadoras", "Medio", "Alto"),
    ("Agroecolog√≠a y sistemas alimentarios sustentables", "FAO, Slow Food", "Alto", "Medio"),
    
    # Cambio clim√°tico
    ("Cambio clim√°tico y uso del suelo", "SEMARNAT, INECC", "Alto", "Alto"),
    ("Cambio clim√°tico y uso del suelo", "Redes comunitarias", "Alto", "Medio"),
    ("Cambio clim√°tico y uso del suelo", "Academia (UNAM, CIESAS)", "Alto", "Medio"),
    ("Cambio clim√°tico y uso del suelo", "Sector inmobiliario, energ√©tico", "Alto", "Alto"),
    ("Cambio clim√°tico y uso del suelo", "PNUD, GIZ, WWF", "Alto", "Medio"),

    # Conservaci√≥n
    ("Conservaci√≥n y manejo comunitario de la biodiversidad", "CONANP, INPI", "Medio", "Alto"),
    ("Conservaci√≥n y manejo comunitario de la biodiversidad", "Comunidades ind√≠genas, ejidos", "Alto", "Alto"),
    ("Conservaci√≥n y manejo comunitario de la biodiversidad", "CONABIO, investigadores", "Alto", "Medio"),
    ("Conservaci√≥n y manejo comunitario de la biodiversidad", "Biocomercio, ecoturismo", "Medio", "Medio"),
    ("Conservaci√≥n y manejo comunitario de la biodiversidad", "TNC, Rainforest Alliance", "Alto", "Medio"),

    # Restauraci√≥n
    ("Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas", "SEMARNAT, ASEA", "Alto", "Alto"),
    ("Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas", "Brigadas y restauradores locales", "Alto", "Medio"),
    ("Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas", "Ec√≥logos, acad√©micos", "Alto", "Medio"),
    ("Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas", "Consultoras, reforestadoras privadas", "Medio", "Alto"),
    ("Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas", "IUCN, Reforestamos M√©xico", "Alto", "Medio"),

    # Educaci√≥n
    ("Educaci√≥n ambiental y comunicaci√≥n", "SEP, gobiernos locales", "Medio", "Alto"),
    ("Educaci√≥n ambiental y comunicaci√≥n", "Escuelas, colectivos locales", "Alto", "Medio"),
    ("Educaci√≥n ambiental y comunicaci√≥n", "Educadores ambientales", "Alto", "Medio"),
    ("Educaci√≥n ambiental y comunicaci√≥n", "Medios con RSE", "Medio", "Medio"),
    ("Educaci√≥n ambiental y comunicaci√≥n", "UNESCO, Earth Charter", "Alto", "Medio"),

    # Justicia ambiental
    ("Justicia ambiental y gobernanza participativa", "CNDH, SCJN", "Medio", "Alto"),
    ("Justicia ambiental y gobernanza participativa", "Defensores del territorio, OSCs", "Alto", "Medio"),
    ("Justicia ambiental y gobernanza participativa", "Antrop√≥logos, juristas ambientales", "Alto", "Medio"),
    ("Justicia ambiental y gobernanza participativa", "Firmas legales privadas", "Medio", "Alto"),
    ("Justicia ambiental y gobernanza participativa", "Global Witness, Amnist√≠a", "Alto", "Medio"),

    # Transici√≥n energ√©tica
    ("Transici√≥n energ√©tica y sostenibilidad territorial", "SENER, CFE", "Alto", "Alto"),
    ("Transici√≥n energ√©tica y sostenibilidad territorial", "Comunidades afectadas", "Alto", "Medio"),
    ("Transici√≥n energ√©tica y sostenibilidad territorial", "Investigadores de energ√≠a", "Alto", "Medio"),
    ("Transici√≥n energ√©tica y sostenibilidad territorial", "Empresas renovables", "Alto", "Alto"),
    ("Transici√≥n energ√©tica y sostenibilidad territorial", "OXFAM, International Rivers", "Alto", "Medio"),
]

# Crear DataFrame
df = pd.DataFrame(data, columns=["Tema", "Actor", "Nivel de Inter√©s", "Nivel de Influencia"])

# Guardar como CSV
csv_path = "_data/Matriz_Temas_Actores_Interes_Influencia.csv"
df.to_csv(csv_path, index=False)

# df = pd.read_csv(csv_path)

# Crear un grafo dirigido (DAG)
G = nx.DiGraph()

# Temas
temas = df["Tema"].unique()

# Agregar nodos de temas y actores
for tema in temas:
    G.add_node(tema, type='tema')

for _, row in df.iterrows():
    G.add_node(row["Actor"], type='actor')
    G.add_edge(row["Actor"], row["Tema"])  # Conexi√≥n desde actor hacia tema

# Definir posiciones para los nodos
pos = nx.spring_layout(G, seed=42, k=0.8)

# Dibujar nodos y bordes
plt.figure(figsize=(18, 11))
tema_nodes = [n for n in G.nodes if G.nodes[n]['type'] == 'tema']
actor_nodes = [n for n in G.nodes if G.nodes[n]['type'] == 'actor']

nx.draw_networkx_nodes(G, pos, nodelist=tema_nodes, node_shape='s', node_size=2000, label='Temas')
nx.draw_networkx_nodes(G, pos, nodelist=actor_nodes, node_color='lightblue', node_size=1200, label='Actores')
nx.draw_networkx_edges(G, pos, arrows=True, arrowstyle='->', arrowsize=15)
nx.draw_networkx_labels(G, pos, font_size=10)

plt.axis('off')
plt.tight_layout()
plt.show()
 
```
 
 

## Temas reformulados {.smaller}

1. Agroecolog√≠a y sistemas alimentarios sustentables

>S√≠ntesis: Fomento de transiciones agroecol√≥gicas con enfoque en sistemas agroforestales, conservaci√≥n gen√©tica y seguridad alimentaria rural.

  Puntos de acci√≥n:

  + Impulsar pr√°cticas agroecol√≥gicas adaptadas al contexto local.
  + Fortalecer bancos de germoplasma comunitarios.
  + Capacitar en innovaci√≥n de sistemas tradicionales de producci√≥n.

## {.smaller}


2. Cambio global, sostenibilidad y din√°mica del paisaje
 
>S√≠ntesis: An√°lisis del impacto del cambio clim√°tico y actividades humanas sobre el paisaje, con √©nfasis en sostenibilidad y cobertura vegetal.

  Puntos de acci√≥n:

  + Implementar monitoreo de cambios en uso de suelo y cobertura vegetal.
  + Desarrollar planes de ordenamiento territorial sostenibles.
  + Promover estrategias de adaptaci√≥n al cambio clim√°tico.

##  {.smaller}


3. Conservaci√≥n y manejo comunitario de la biodiversidad
 
>S√≠ntesis: Conservaci√≥n ambiental basada en comunidades, enfocada en el uso sustentable de recursos forestales y relaciones socioecol√≥gicas.

  Puntos de acci√≥n:

  + Fortalecer capacidades locales para el manejo forestal sustentable.
  + Promover gobernanza comunitaria de la biodiversidad.
  + Documentar y valorar saberes locales en conservaci√≥n.

##  {.smaller}


4. Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas

>S√≠ntesis: Evaluaci√≥n integral y restauraci√≥n de ecosistemas terrestres y costeros para la toma de decisiones sustentables.

  Puntos de acci√≥n:

  + Establecer indicadores integrales de salud ecosist√©mica.
  + Dise√±ar proyectos de restauraci√≥n ecol√≥gica con base cient√≠fica.
  + Integrar criterios ecol√≥gicos en pol√≠ticas de uso de suelo.

## {.smaller}


5. Estudios sociocognitivos y herramientas socioecol√≥gicas

>S√≠ntesis: Desarrollo de metodolog√≠as participativas para entender el cambio ambiental y fomentar conciencia socioambiental.

Puntos de acci√≥n:

  + Aplicar herramientas l√∫dicas y multiactorales en procesos educativos.
  + Investigar percepciones locales sobre cambio ambiental.
  + Integrar ciencias cognitivas en proyectos de sustentabilidad.

##  {.smaller}

6. Gesti√≥n del agua y procesos hidrol√≥gicos

>S√≠ntesis: Gesti√≥n local e integral del agua con enfoque en seguridad h√≠drica y an√°lisis de sistemas socioecol√≥gicos.

 Puntos de acci√≥n:

  + Crear comit√©s locales para la gesti√≥n del agua.
  + Promover tecnolog√≠as de captaci√≥n y uso eficiente.
  + Monitorear flujos hidrol√≥gicos con participaci√≥n comunitaria.

##  {.smaller}

7. Pol√≠ticas y justicia socioambiental

>S√≠ntesis: An√°lisis de pol√≠ticas ambientales y su impacto en justicia social y bienestar humano.

  Puntos de acci√≥n:

  + Evaluar pol√≠ticas p√∫blicas desde una perspectiva de equidad.
  + Incidir en el dise√±o de marcos legales con enfoque de justicia ambiental.
  + Promover participaci√≥n ciudadana en la formulaci√≥n de pol√≠ticas.

##  {.smaller}

8. Sistem√°tica y ecolog√≠a de insectos

>S√≠ntesis: Investigaci√≥n sobre insectos de inter√©s m√©dico y veterinario desde un enfoque ecol√≥gico y taxon√≥mico.

  Puntos de acci√≥n:

  + Fortalecer colecciones biol√≥gicas y su digitalizaci√≥n.
  + Estudiar relaciones ecol√≥gicas entre insectos y ambientes perturbados.
  + Capacitar en identificaci√≥n y monitoreo de vectores.

##  {.smaller}

9. Tecnolog√≠a para el monitoreo ambiental

>S√≠ntesis: Aplicaci√≥n de tecnolog√≠as avanzadas (IA, percepci√≥n remota, sensores) para el monitoreo ambiental y del comportamiento animal.
    
  Puntos de acci√≥n:

  + Desarrollar plataformas abiertas para monitoreo ambiental.
  + Integrar IA en el an√°lisis de datos ecol√≥gicos.
  + Fomentar alianzas interdisciplinarias para innovaci√≥n tecnol√≥gica.



##

**Cluster 1:** Sistemas naturales y cambio global

::: {style="font-size: 0.7em"}

Temas incluidos:

+ Cambio global, sostenibilidad y din√°mica del paisaje
+ Gesti√≥n del agua y procesos hidrol√≥gicos
+ Sistem√°tica y ecolog√≠a de insectos

Descripci√≥n:

>Este grupo re√∫ne temas relacionados con los procesos ecol√≥gicos a gran escala, la din√°mica de los sistemas terrestres y el papel de la biodiversidad (en especial los insectos) en la regulaci√≥n ambiental. La gesti√≥n del agua aparece como eje transversal que conecta el cambio clim√°tico con necesidades concretas de adaptaci√≥n ecol√≥gica. Tiene fuerte anclaje en la ciencia b√°sica, la modelaci√≥n y el monitoreo.

:::

##

**Cluster 2:** Restauraci√≥n, conservaci√≥n y justicia territorial

::: {style="font-size: 0.7em"}

Temas incluidos:

+ Conservaci√≥n y manejo comunitario de la biodiversidad 
+ Evaluaci√≥n ambiental, restauraci√≥n y manejo de ecosistemas
+ Pol√≠ticas y justicia socioambiental

Descripci√≥n:

>Aqu√≠ se agrupan temas con una fuerte dimensi√≥n territorial y sociopol√≠tica, que abordan la restauraci√≥n ecol√≥gica, la conservaci√≥n participativa y la exigencia de derechos en contextos de conflictividad ambiental. Enfatiza la relaci√≥n entre las comunidades (especialmente rurales e ind√≠genas), las instituciones y el acceso equitativo a los bienes comunes. Se nutre de enfoques ecol√≥gicos aplicados, gobernanza y pol√≠ticas p√∫blicas.

:::

##

**Cluster 3:** Herramientas sociales y tecnol√≥gicas para la sustentabilidad

::: {style="font-size: 0.7em"}

Temas incluidos:

+ Estudios sociocognitivos y herramientas socioecol√≥gicas para la sustentabilidad
+ Tecnolog√≠a para el monitoreo ambiental

Descripci√≥n:

>Este grupo destaca por su enfoque instrumental y metodol√≥gico: por un lado, el an√°lisis de c√≥mo se construyen y usan los saberes en procesos participativos; por otro, el uso de tecnolog√≠as de monitoreo para la gesti√≥n y evaluaci√≥n ambiental. Es un cluster que vincula lo social y lo t√©cnico, ideal para proyectos de innovaci√≥n comunitaria, ciencia ciudadana y gobernanza colaborativa.

:::
  

